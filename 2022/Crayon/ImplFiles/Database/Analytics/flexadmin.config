<?xml version="1.0" encoding="utf-8" ?>

<!-- 
	This module contains targets for creating and configuring databases
	for the Flexera Analytics.

	Copyright (C) 2015-2018 Flexera Software
-->
<Configuration>
	<!-- 
		LOCAL SETTINGS
		The following declarations define settings that are local to this module.
	-->

	<!--
		LOCAL TARGETS
		The following declarations define targets that are local to this module.
	-->

	<Target Name="ConfigureCognosDatabase"
		Description="Create and configure the Flexera Analytics content store database">

		<Step SQLScript="CreateContentStoreDatabase.sql" 
			DBServer="$(FNMSDBServer)" 
			DBName="master" 
			ConfigSettings="ContentStoreDBName" 
		/>

		<Step SQLScript="..\FNMS\CheckCompatibilityLevel.sql" DBServer="$(FNMSDBServer)" DBName="$(ContentStoreDBName)"/>
	</Target>


	<!-- 
		GLOBAL TARGETS
		The following declarations register steps with global targets.   
		Other modules may also add steps to these same targets.  
	-->
	
	<Target Name="ConfigureAllDatabases">
		<Step Target="ConfigureCognosDatabase" If="(GetConfigValue 'DoMultiTenantInstall') -eq 'N' -and (GetConfigValue 'InstallWebAppServerComponents') -eq 'Y'"/>
	</Target>
</Configuration>
